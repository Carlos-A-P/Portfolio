const projects = `[
    {
        "title": "E-Commerce Product Page",
        "image": "url(../img/e-commerce.jpg)",
        "description": "This is a E-commerce product page where the user is allowed to open a lightbox gallery by clicking on the large product image, switch the large product image by clicking on the small thumbnail images, view cart, and add/remove cart items",
        "live": "https://cpwd-ecommerce-product-page.netlify.app/",
        "code": "https://github.com/Carlos-A-P/ecommerce-product-page-react",
        "made_with": {
            "0":"React.js", 
            "1":"Redux", 
            "2":"CSS"
        },
        "preview": "<div style=\\"padding:61.12% 0 0 0;position:relative;\\"><iframe src=\\"https://player.vimeo.com/video/644902213?h=9633cd3cb3&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\\" frameborder=\\"0\\" allow=\\"autoplay; fullscreen; picture-in-picture\\" allowfullscreen style=\\"position:absolute;top:0;left:0;width:100%;height:100%;\\" title=\\"e-commerce product page\\"></iframe></div><script src=\\"https://player.vimeo.com/api/player.js\\"></script>",
        
        "longer_description": "This was a very challenging and fun project. I implemented the Redux javascript library in order to manage the state for my cart. I became more comfortable with React hooks and can comfortably navigate and implement functions through out my project."
    },
    {
        "title": "Shortly URL shortening API website",
        "image": "url(../img/url-shortening-api.jpg)",
        "description": "In this project, users should be able to: View the optimal layout for the site depending on their device's screen size, Shorten any valid URL, See a list of their shortened links, even after refreshing the browser, Copy the shortened link to their clipboard in a single click, Receive an error message when the form is submitted if: The input field is empty",
        "live": "https://carlos-a-p.github.io/URL-shortening-API-master/",
        "code": "https://github.com/Carlos-A-P/URL-shortening-API-master",
        "made_with": {
            "0":"HTML", 
            "1":"CSS", 
            "2":"JavaScript",
            "3":"BootStrap",
            "4":"API"
        },
        "preview": "<div style=\\"padding:64.29% 0 0 0;position:relative;\\"><iframe src=\\"https://player.vimeo.com/video/635907938?h=4c214efa68&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\\" frameborder=\\"0\\" allow=\\"autoplay; fullscreen; picture-in-picture\\" allowfullscreen style=\\"position:absolute;top:0;left:0;width:100%;height:100%;\\" title=\\"URL-Shortening-API\\"></iframe></div><script src=\\"https://player.vimeo.com/api/player.js\\"></script>",
        
        "longer_description": "I used the BootStrap framework to get familiar using it and I noticed that it does make the project easier to complete. I also tried to insert a loading gif to simulate a loading element. I used a setTimeout() method to add a timer of 2 seconds after the user submits the input. Overall, this was a fun project and I hope to get proficient at utilizing Bootstrap"
    },
    {
        "title": "My Portfolio",
        "image": "url(../img/portfolio-preview.png)",
        "description": "This is my portfolio that I created displaying my projects and work as a front-end developer. I aimed for a simple look and and format that's easy to navigate through. User should be able to view project cards along with video preview of projects. Also includes email submission form using Formspree API.",
        "live": "https://carlospwd.netlify.app/",
        "code": "https://github.com/Carlos-A-P/Portfolio",
        "made_with": {
            "0":"HTML", 
            "1":"CSS", 
            "2":"JavaScript",
            "3":"BootStrap",
            "4":"JQuery",
            "5":"JSON"
        },
        "preview": "<div style=\\"padding:64.29% 0 0 0;position:relative;\\"><iframe src=\\"https://player.vimeo.com/video/638017476?h=2a4669998e&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\\" frameborder=\\"0\\" allow=\\"autoplay; fullscreen; picture-in-picture\\" allowfullscreen style=\\"position:absolute;top:0;left:0;width:100%;height:100%;\\" title=\\"portfolio-preview\\"></iframe></div><script src=\\"https://player.vimeo.com/api/player.js\\"></script>",
        
        "longer_description": "This project was my first time implementing bootstrap and jquery into my project. I thought jquery was complex at first, but after getting the hang of its settings and reading through the documentation, I found that I saved a lot of time using this framework. I usually try to keep accessibility in mind, but bootstrap already gets that taken care of. I tried to keep animations to a minimum. I didn't want to rely on every user having above-average internet speed, and I learned that animations could be incredibly taxing on mobile devices. I used jquery to add some exciting animations into my nav settings. There were already many blogs and methods to do this, and I wanted to try it out. I'm glad I did since it made my portfolio look more professional, and I learned a lot about programming frameworks. As for the video previews, I was thinking of downloading video files, but I quickly learned that it could drastically slow down the website's loading speed. I also had a problem where I didn't want to create an individual modal for each card, so I used JSON object and for loops to pass in values depending on the card chosen. The JSON object also allowed me to add values and automatically update my project section by appending a new child. I did this using for loops."
    },
    {
        "title": "Coffee Roasters Multi-page Subscription Site",
        "image": "url(../img/coffeeroasters-subscription.png)",
        "description": "This is a 3-page coffee subscription website. Users should be able to: View the optimal layout for each page depending on their device's screen size, See hover states for all interactive elements throughout the site, Make selections to create a coffee subscription and see an order summary modal of their choices.",
        "live": "https://cpwd-coffeeroasters.netlify.app/",
        "code": "https://github.com/Carlos-A-P/coffeeroasters-subscription-site",
        "made_with": {
            "0":"HTML", 
            "1":"CSS", 
            "2":"JavaScript"
        },
        "preview": "<div style=\\"padding:82% 0 0 0;position:relative;\\"><iframe src=\\"https://player.vimeo.com/video/615312720?h=e2fb553814&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\\" frameborder=\\"0\\" allow=\\"autoplay; fullscreen; picture-in-picture\\" allowfullscreen style=\\"position:absolute;top:0;left:0;width:100%;height:100%;\\" title=\\"coffee_roasters\\"></iframe></div><script src=\\"https://player.vimeo.com/api/player.js\\"></script>\",
        
        "longer_description": "This was a tough challenge that tested a lot of my javascript skills and organizational skills. It was a lot more than I expected but overall a very educational experience. I learned that there are many ways to do things, but some may be much easier and efficient than others. For example, my accordion was comprised of many buttons, but I first started by using div elements along with click event listeners. I later discovered that it was very tedious to make it accessible and decided to go with buttons instead, which comprised its own challenges with inner tags. Overall, I wanted to make an app that was mainly functional and accessible, so I didn't focus too much on transitions. I enjoyed this project, and I certainly learned a lot from it."
    },
    {
        "title": "Github User Search App",
        "image": "url(../img/github-user-search-app.jpg)",
        "description": "This app allows users to search for a username from Github using Github API. The app displays relevant information based on their search. User can also toggle between light and dark themes.",
        "live": "https://cpwd-github-user-search-app.netlify.app/",
        "code": "https://github.com/Carlos-A-P/github-user-search-app",
        "made_with": {
            "0":"HTML", 
            "1":"CSS", 
            "2":"JavaScript",
            "3":"API"
        },
        "preview": "<div style=\\"padding:82% 0 0 0;position:relative;\\"><iframe src=\\"https://player.vimeo.com/video/615315737?h=5dbc8956b8&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\\" frameborder=\\"0\\" allow=\\"autoplay; fullscreen; picture-in-picture\\" allowfullscreen style=\\"position:absolute;top:0;left:0;width:100%;height:100%;\\" title=\\"github_api\\"></iframe></div><script src=\\"https://player.vimeo.com/api/player.js\\"></script>",
        "longer_description": "This is my first API project where I made an app able to gather information from github to display user profile information. I also learned how to use Figma design files in order to provide the most accurate measurements possible."
    },
    {
        "title": "To-Do App",
        "image": "url(../img/todo-app.jpg)",
        "description": "This is a todo list challenge from frontend mentor. User should be able to: add new todos to the list, marks todos as complete, delete todos from the list, filter by all/active/complete todos, clear all completed todos, toggle light and dark mode, drag and drop to reorder items on the list",
        "live": "https://cpwd-todo-list.netlify.app/",
        "code": "https://github.com/Carlos-A-P/ToDo-List",
        "made_with": {
            "0":"HTML", 
            "1":"CSS", 
            "2":"JavaScript",
            "3":"Local Storage"
        },
        "preview": "<div style=\\"padding:82% 0 0 0;position:relative;\\"><iframe src=\\"https://player.vimeo.com/video/615317334?h=11c4fda5ee&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\\" frameborder=\\"0\\" allow=\\"autoplay; fullscreen; picture-in-picture\\" allowfullscreen style=\\"position:absolute;top:0;left:0;width:100%;height:100%;\\" title=\\"todo_app\\"></iframe></div><script src=\\"https://player.vimeo.com/api/player.js\\"></script>",
        "longer_description": "This challenge proved to be difficult. I learned a lot about for loops and foreach methods. I tried to connect this to a backend server such as Azure db but I found it rather difficult and resulted to using local storage which also got the results that I wanted. I thought it was a lot easier to use for loops for this but quickly learned that in order to use them I have to keep changing the original array. As for saving the user's list, I saved the inner html of the todo wrapper and store it in a local storage every time it gets updated but some of the event handlers. Something that I'd like to improve on it learning how to implement a functional drag and drop without having to use an open source code."
    },
    {
        "title": "Tip Calculator",
        "image": "url(../img/tip-calculator.jpg)",
        "description": "This is a tip calculator app from frontend mentor. This project was completed with the help of HTML, CSS, and JavaScript",
        "live": "https://carlospwd-tip-calculator.netlify.app/",
        "code": "https://github.com/Carlos-A-P/tip-calculator-app",
        "made_with": {
            "0":"HTML", 
            "1":"CSS", 
            "2":"JavaScript"
        },
        "preview": "<div style=\\"padding:82% 0 0 0;position:relative;\\"><iframe src=\\"https://player.vimeo.com/video/615318728?h=7a0bcc9e62&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\\" frameborder=\\"0\\" allow=\\"autoplay; fullscreen; picture-in-picture\\" allowfullscreen style=\\"position:absolute;top:0;left:0;width:100%;height:100%;\\" title=\\"tip_calculator\\"></iframe></div><script src=\\"https://player.vimeo.com/api/player.js\\"></script>",
        "longer_description": "This was an extremely fun challenge where I got to practice more javascript functions and understand how to efficiently implement it in my projects. I also used the data attribute to link my grid buttons to my script.js file. I generally reserve the class attribute for my css and my id attributes for JavaScript, however, in this case I had multiple buttons so I used the data attribute. As far as what I learned in CSS, I learned how to used the focus pseudo-class to let the user see the tip percentage they are using."
    },
    {
        "title": "Room Homepage",
        "image": "url(../img/room-homepage.jpg)",
        "description": "A Frontend mentor project completed with HTML, CSS, and JavaScript. This project contains an interactive nav bar with a slideshow",
        "live": "https://cpwd-room-homepage.netlify.app/",
        "code": "https://github.com/Carlos-A-P/room-homepage",
        "made_with": {
            "0":"HTML", 
            "1":"CSS", 
            "2":"JavaScript"
        },
        "preview": "<div style=\\"padding:64.75% 0 0 0;position:relative;\\"><iframe src=\\"https://player.vimeo.com/video/615320341?h=8c3b7132ea&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\\" frameborder\\"0\\" allow=\\"autoplay; fullscreen; picture-in-picture\\" allowfullscreen style=\\"position:absolute;top:0;left:0;width:100%;height:100%;\\" title=\\"room_homepage\\"></iframe></div><script src=\\"https://player.vimeo.com/api/player.js\\"></script>",
        "longer_description": "This challenge really tested my grid-layout skills and I tried to use the least amount of code possible. This is also the first project where I added animations and transitions which was really fun to play around with. Lastly, I was able to add smooth transitions between slides and header images smoothly in multiple screens."
    },
    {
        "title": "Launch Countdown Timer",
        "image": "url(../img/launch-countdown-timer.jpg)",
        "description": "This is a countdown timer challenge that I completed using HTML, CSS, and JavaScript. I used most of the javascript and css for the timer from this code: https://codepen.io/shshaw/pen/vKzoLL So I mainly focused on styling the countdown timer as if I were in a situation where I would really have an html and had to prioritize my CSS over the timerâ€¦",
        "live": "https://cpwd-count-down-timer.netlify.app/",
        "code": "https://github.com/Carlos-A-P/launch-countdown-timer",
        "made_with": {
            "0":"HTML", 
            "1":"CSS", 
            "2":"JavaScript"
        },
        "preview": "<div style=\\"padding:66.54% 0 0 0;position:relative;\\"><iframe src=\\"https://player.vimeo.com/video/615322739?h=47000b7843&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\\" frameborder=\\"0\\" allow=\\"autoplay; fullscreen; picture-in-picture\\" allowfullscreen style=\\"position:absolute;top:0;left:0;width:100%;height:100%;\\" title=\\"countdown-timer\\"></iframe></div><script src=\\"https://player.vimeo.com/api/player.js\\"></script>",
        "longer_description": "In this challenge I used the a javascript code from Website CodePen Home Flip Clock & Countdown which is a clock made without a HTML so I mainly focused on prioritizing my CSS and changing styles using Devtools. I also added a few changes to the javascript to remove the second timer."
    }
]`;

let myProjects = document.getElementById("grid");

// another way to set up divs is to set up template literal and add values and append that maybe

// function for adding cards
function addCard(card_image, card_title, card_text) {
	// create a card div
	let projectCard = document.createElement("div");
	projectCard.classList.add("card");

	// projectCard.innerHTML = `
	//         <div class="project-img"
	//             style="background-image: ${String(card_image)}"></div>
	//         <div class="card-body d-flex flex-column">
	//             <h3 class="card-title">${String(card_title)}</h3>
	//             <p class="card-text">${String(card_text)}</p>
	//             <button class="btn mt-auto" type="button" data-bs-toggle="modal" onClick="modalInfo('${card_title}')">
	//                 View more
	//             </button>
	//         </div>

	// `;

	// create image div to add background image for card
	let cardImage = document.createElement("div");
	cardImage.classList.add("project-img");
	cardImage.style.backgroundImage = String(card_image);

	// create card body
	let cardBody = document.createElement("div");
	cardBody.classList.add("card-body", "d-flex", "flex-column");
	//create card card title
	let cardTitle = document.createElement("h3");
	cardTitle.classList.add("card-title");
	cardTitle.innerHTML = String(card_title);
	// create card textContent
	let cardText = document.createElement("p");
	cardText.classList.add("card-text");
	cardText.innerHTML = String(card_text);

	//create button
	let cardButton = document.createElement("button");
	cardButton.classList.add("btn", "mt-auto");
	cardButton.setAttribute("type", "button");
	cardButton.setAttribute("data-bs-toggle", "modal");
	cardButton.setAttribute("data-bs-target", "#projectModal");
	// add onclick attribute to pass in modal function to gather modal info
	cardButton.setAttribute("onClick", `modalInfo('${card_title}')`);
	cardButton.innerHTML = "View more";
	// start assembling card div
	projectCard.appendChild(cardImage);
	projectCard.appendChild(cardBody);
	cardBody.appendChild(cardTitle);
	cardBody.appendChild(cardText);
	cardBody.appendChild(cardButton);

	//add card to parent div
	myProjects.appendChild(projectCard);
}

// in this function, i gather the information that I want from the JSON object and pass it to my function where I want to make the div and append the div to the parent
function displayProjects() {
	// JSON.parse(projects).length or 9 for number display
	for (let i = 0; i < 6; i++) {
		addCard(
			JSON.parse(projects)[i].image,
			JSON.parse(projects)[i].title,
			JSON.parse(projects)[i].description
		);
	}
}
displayProjects();

let modalTitle = document.getElementById("projectModalLabel");
let card_description = document.getElementById("card-description");
let codeBtn = document.getElementById("viewCode");
let liveBtn = document.getElementById("viewLive");
let techList = document.getElementById("tech_List");
let cardPreview = document.getElementById("card-preview");

// function inserts the info into the modal: big description, code and live urls, and list of technologies
function modalInfo(myCard) {
	let arr;
	for (let i = 0; i < JSON.parse(projects).length; i++) {
		// if the card chosen is the same as the JSON title
		if (myCard === String(JSON.parse(projects)[i].title)) {
			// modal title = "title"
			modalTitle.innerText = String(JSON.parse(projects)[i].title);
			// card preview video
			cardPreview.innerHTML = JSON.parse(projects)[i].preview;
			// card description = "longer_description"
			card_description.innerText = String(
				JSON.parse(projects)[i].longer_description
			);
			// href = "code"
			codeBtn.setAttribute("href", `${JSON.parse(projects)[i].code}`);
			// href = "live"
			liveBtn.setAttribute("href", `${JSON.parse(projects)[i].live}`);
			// adding "made_with" values in variable
			arr = JSON.parse(projects)[i].made_with;
			let item = [];
			for (let j = 0; j < Object.keys(arr).length; j++) {
				// loop through arr variable to add values in an array and join as li tags together to add inside parent ul
				item.push(`<li>${arr[j]}</li>`);
				techList.innerHTML = item.join("");
			}
		}
	}
}

// ============modal for card description
var myModal = document.getElementById("myModal");
var myInput = document.getElementById("myInput");
myModal.addEventListener("shown.bs.modal", function () {
	myInput.focus();
});

// ============Email Form
window.addEventListener("DOMContentLoaded", function () {
	// get the form elements defined in your form HTML above

	var form = document.getElementById("my-form");
	// var button = document.getElementById("my-form-button")
	var status = document.getElementById("status");

	// Success and Error functions for after the form is submitted

	function success() {
		form.reset();
		status.classList.add("success");
		status.innerHTML = "Thanks!";
	}

	function error() {
		status.classList.add("error");
		status.innerHTML = "Oops! There was a problem.";
	}

	// handle the form submission event

	form.addEventListener("submit", function (ev) {
		ev.preventDefault();
		var data = new FormData(form);
		ajax(form.method, form.action, data, success, error);
	});
});

// helper function for sending an AJAX request

function ajax(method, url, data, success, error) {
	var xhr = new XMLHttpRequest();
	xhr.open(method, url);
	xhr.setRequestHeader("Accept", "application/json");
	xhr.onreadystatechange = function () {
		if (xhr.readyState !== XMLHttpRequest.DONE) return;
		if (xhr.status === 200) {
			success(xhr.response, xhr.responseType);
		} else {
			error(xhr.status, xhr.response, xhr.responseType);
		}
	};
	xhr.send(data);
}
